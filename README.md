# AMPI

Реализация многопользовательской системы загрузки и выгрузки небольших файлов.
1. Пользователь взаимодействует с системой через единый шлюз доступа по протоколу HTTP.
2. Система состоит из нескольких отдельных сервисов (БД для пользователей, файлов и отчетов). 
3. У каждого сервиса своя БД.
4. Сервисы взаимодействуют асинхронно передавая и получая события об изменениях через шину.
5. Падение одного сервиса не должно приводить к недоступности всей системы.

## Локальный запуск проекта

### Начало работы

Инструкция подразумевает, что используется Linux или MacOS. На Windows инструкция не тестировалась.
Подразумевается, что виртуальное окружение (python virtualenv) создано, зависимости установлены.


Перед началом работы нужно их поднять и убедиться, что все сервисы стартанули успешно:

```docker-compose -f docker-compose.local.up```

#### Подключение к PostgreSQL:
Подключаемся к PostgeSQL (datagrip, инструменты ide, иные инструменты).

К трем БД по 5495, 5496, 5497 портам.

#### Применение миграций:
Находясь в виртуальном окружении выполняем:

```python manage.py migrate```

```python manage.py migrate files --database=files```

```python manage.py migrate reports --database=reports```

#### Создание супер-пользователя и запуск проекта:

Выполняем:

```python manage.py createsuperuser```

Запускаем проект:

```python manage.py runserver```

